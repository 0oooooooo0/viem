import { RLP } from 'ethers/lib/utils'
import { bench, describe } from 'vitest'

import { encodeRlp } from './encodeRlp'

describe('RLP Encoding (128 bytes)', () => {
  bench('viem: `encodeRlp`', () => {
    encodeRlp(
      '0x1000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000000000000000000000000000000000',
    )
  })

  bench('ethers: `RLP.encode`', () => {
    RLP.encode(
      '0x1000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000000000000000000000000000000000',
    )
  })
})

describe('RLP Encoding (nested array)', () => {
  bench('viem: `encodeRlp`', () => {
    encodeRlp([['0x11'], [['0x11']], [['0x11'], [['0x11']]]])
  })

  bench('ethers: `RLP.encode`', () => {
    RLP.encode([['0x11'], [['0x11']], [['0x11'], [['0x11']]]])
  })
})

describe('RLP Encoding (nested array of 128 bytes)', () => {
  bench('viem: `encodeRlp`', () => {
    encodeRlp([
      '0x1000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000000000000000000000000000000000',
      [
        '0x1000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000000000000000000000000000000000',
        [
          '0x1000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000000000000000000000000000000000',
        ],
      ],
    ])
  })

  bench('ethers: `RLP.encode`', () => {
    RLP.encode([
      '0x1000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000000000000000000000000000000000',
      [
        '0x1000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000000000000000000000000000000000',
        [
          '0x1000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000000000000000000000000000000000',
        ],
      ],
    ])
  })
})
